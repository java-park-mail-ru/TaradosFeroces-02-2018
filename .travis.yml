sudo: required
lang:

services:
  - docker

#branches:
#  only:
#  - develop
#  - sandbox
#  - docker

before_install:
    - sudo apt-get update -qq
    - sudo apt-get install oracle-9-installer
    - remove_dir_from_path $JAVA_HOME/bin
    - export JAVA_HOME=/usr/lib/jvm/java-9-oracle
    - export PATH=$JAVA_HOME/bin:$PATH
    - java -version
    - docker build -t deadlinez ./
    - docker images

script:
    - docker run --rm -p 8080:8080 deadlinez tests


deploy:
  provider: heroku
  api_key:
    secure: $HEROKU_API_KEY
  app: deadlinez
  on:
    repo: Alex-Kuz/TaradosFeroces-02-2018
    branch: docker
  skip_cleanup: true
